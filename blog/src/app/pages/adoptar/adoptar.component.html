<!-- Adopción y Apadrinamiento de Pandas -->
<div class="page-header mb-5 text-center" style="background: linear-gradient(135deg, #2d5a27 0%, #4a7c59 100%); color: white; padding: 4rem 0; border-radius: 15px;">
  <div class="container">
    <h1 class="display-3 fw-bold mb-3">
      <i class="fas fa-heart me-3" style="color: #ff6b6b;"></i>
      Adopta un Panda
    </h1>
    <p class="lead fs-4">Conviértete en padrino de un panda y ayuda a proteger estas increíbles criaturas</p>
    <div class="mt-4">
      <span class="badge bg-warning fs-6 me-2">
        <i class="fas fa-paw me-1"></i>Adopción Virtual
      </span>
      <span class="badge bg-info fs-6 me-2">
        <i class="fas fa-donate me-1"></i>Donaciones
      </span>
      <span class="badge bg-success fs-6">
        <i class="fas fa-certificate me-1"></i>Certificado Oficial
      </span>
    </div>
  </div>
</div>

<!-- Introducción -->
<div class="row mb-5">
  <div class="col-12">
    <div class="alert alert-info border-0 shadow-sm">
      <div class="row align-items-center">
        <div class="col-md-8">
          <h4 class="alert-heading">
            <i class="fas fa-info-circle text-primary me-2"></i>
            ¿Qué significa adoptar un panda?
          </h4>
          <p class="mb-0">
            La adopción simbólica de pandas es una forma maravillosa de apoyar los esfuerzos de conservación.
            Tu contribución ayuda directamente al cuidado, alimentación, investigación médica y preservación del hábitat de estos increíbles animales.
          </p>
        </div>
        <div class="col-md-4 text-center">
          <img src="https://images.unsplash.com/photo-1564349683136-77e08dba1ef7?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
               alt="Panda bebé" class="img-fluid rounded-circle shadow" style="width: 150px; height: 150px; object-fit: cover;">
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Opciones de Adopción -->
<div class="row mb-5">
  <div class="col-12 text-center mb-4">
    <h2 class="display-5" style="color: #2d5a27;">
      <i class="fas fa-gift me-3"></i>
      Opciones de Apadrinamiento
    </h2>
    <p class="lead text-muted">Elige la opción que mejor se adapte a tu corazón y presupuesto</p>
  </div>

  <!-- Adopción Básica -->
  <div class="col-md-4 mb-4">
    <div class="card h-100 shadow-sm border-0" style="transform: scale(1); transition: transform 0.3s;">
      <div class="card-header text-center" style="background: linear-gradient(45deg, #28a745, #20c997); color: white;">
        <h4 class="mb-0">
          <i class="fas fa-leaf me-2"></i>
          Padrino Bambú
        </h4>
        <p class="mb-0 small">Adopción Básica</p>
      </div>
      <img src="https://images.unsplash.com/photo-1564349683136-77e08dba1ef7?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1yZWxhdGVkfDE1fHx8ZW58MHx8fHx8"
           class="card-img-top" alt="Panda comiendo" style="height: 200px; object-fit: cover;">
      <div class="card-body text-center">
        <div class="display-6 fw-bold text-success mb-3">25€/mes</div>
        <ul class="list-unstyled text-start">
          <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Certificado de adopción personalizado</li>
          <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Foto y ficha de tu panda adoptado</li>
          <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Actualizaciones trimestrales por email</li>
          <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Acceso a contenido exclusivo</li>
          <li class="mb-2"><i class="fas fa-check text-success me-2"></i> Calendario digital de pandas</li>
        </ul>
        <button class="btn btn-success btn-lg w-100 mt-3" (click)="openModal('basico')">
          <i class="fas fa-heart me-2"></i>
          Adoptar Ahora
        </button>
      </div>
    </div>
  </div>

  <!-- Adopción Premium -->
  <div class="col-md-4 mb-4">
    <div class="card h-100 shadow border-warning" style="transform: scale(1.05); transition: transform 0.3s; position: relative;">
      <div class="badge bg-warning text-dark position-absolute" style="top: -10px; right: 10px; font-size: 0.9rem;">
        <i class="fas fa-star me-1"></i>POPULAR
      </div>
      <div class="card-header text-center" style="background: linear-gradient(45deg, #ffc107, #fd7e14); color: white;">
        <h4 class="mb-0">
          <i class="fas fa-crown me-2"></i>
          Padrino Real
        </h4>
        <p class="mb-0 small">Adopción Premium</p>
      </div>
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQLRIxN8LUGFMYHCYZ05XZQg_h32R4j1BGlHw&s"
           class="card-img-top" alt="Familia de pandas" style="height: 200px; object-fit: cover;">
      <div class="card-body text-center">
        <div class="display-6 fw-bold text-warning mb-3">50€/mes</div>
        <ul class="list-unstyled text-start">
          <li class="mb-2"><i class="fas fa-check text-warning me-2"></i> Todo lo del plan Bambú</li>
          <li class="mb-2"><i class="fas fa-check text-warning me-2"></i> Kit de bienvenida físico</li>
          <li class="mb-2"><i class="fas fa-check text-warning me-2"></i> Peluche oficial de panda</li>
          <li class="mb-2"><i class="fas fa-check text-warning me-2"></i> Actualizaciones mensuales con video</li>
          <li class="mb-2"><i class="fas fa-check text-warning me-2"></i> Invitación eventos virtuales</li>
          <li class="mb-2"><i class="fas fa-check text-warning me-2"></i> Descuento 20% en tours</li>
        </ul>
        <button class="btn btn-warning btn-lg w-100 mt-3" style="color: white;" (click)="openModal('premium')">
          <i class="fas fa-star me-2"></i>
          Adoptar Premium
        </button>
      </div>
    </div>
  </div>

  <!-- Adopción VIP -->
  <div class="col-md-4 mb-4">
    <div class="card h-100 shadow-lg border-0" style="background: linear-gradient(145deg, #6f42c1 0%, #495057 100%); color: white;">
      <div class="card-header text-center border-0" style="background: rgba(255,255,255,0.1);">
        <h4 class="mb-0">
          <i class="fas fa-gem me-2"></i>
          Padrino VIP
        </h4>
        <p class="mb-0 small">Adopción Exclusiva</p>
      </div>
      <img src="https://www.nippon.com/es/ncommon/contents/japan-data/2800055/2800055.jpg"
           class="card-img-top" alt="Panda rojo" style="height: 200px; object-fit: cover;">
      <div class="card-body text-center">
        <div class="display-6 fw-bold mb-3">100€/mes</div>
        <ul class="list-unstyled text-start">
          <li class="mb-2"><i class="fas fa-check me-2"></i> Todo lo del plan Premium</li>
          <li class="mb-2"><i class="fas fa-check me-2"></i> Visita exclusiva anual al centro</li>
          <li class="mb-2"><i class="fas fa-check me-2"></i> Encuentro personal con tu panda</li>
          <li class="mb-2"><i class="fas fa-check me-2"></i> Placa conmemorativa con tu nombre</li>
          <li class="mb-2"><i class="fas fa-check me-2"></i> Libro de fotos profesional</li>
          <li class="mb-2"><i class="fas fa-check me-2"></i> Tour privado con biólogo</li>
        </ul>
        <button class="btn btn-light btn-lg w-100 mt-3" (click)="openModal('vip')">
          <i class="fas fa-gem me-2"></i>
          Adoptar VIP
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Sección Especial: Pandas Recién Nacidos -->
<div class="row mb-5">
  <div class="col-12">
    <div class="card border-0 shadow-lg" style="background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);">
      <div class="card-body p-5">
        <div class="row align-items-center">
          <div class="col-md-6 text-center">
            <div class="position-relative d-inline-block">
              <img src="https://images.unsplash.com/photo-1548199973-03cce0bbc87b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300&q=80"
                   class="img-fluid rounded-3 shadow" alt="Panda bebé" style="max-height: 300px;">
              <div class="position-absolute top-0 end-0 bg-warning text-dark px-3 py-1 rounded-3 m-2">
                <i class="fas fa-baby me-1"></i>
                <strong>¡NUEVO!</strong>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <h2 class="display-5 fw-bold mb-3" style="color: #d63384;">
              <i class="fas fa-baby me-3"></i>
              Adopta un Panda Recién Nacido
            </h2>
            <p class="lead mb-4">
              Sé parte de algo muy especial: acompaña a un panda bebé desde sus primeros días de vida.
            </p>

            <div class="row mb-4">
              <div class="col-6">
                <div class="text-center p-3 bg-white rounded-3 shadow-sm">
                  <i class="fas fa-heart fa-2x text-danger mb-2"></i>
                  <h6>Cuidados 24/7</h6>
                  <small class="text-muted">Atención especializada</small>
                </div>
              </div>
              <div class="col-6">
                <div class="text-center p-3 bg-white rounded-3 shadow-sm">
                  <i class="fas fa-camera fa-2x text-primary mb-2"></i>
                  <h6>Fotos Diarias</h6>
                  <small class="text-muted">Ve cómo crece</small>
                </div>
              </div>
            </div>

            <div class="alert alert-warning border-0 shadow-sm mb-4">
              <div class="d-flex align-items-center">
                <i class="fas fa-exclamation-triangle fa-2x me-3"></i>
                <div>
                  <strong>Adopción Especial</strong><br>
                  <small>Los pandas bebés requieren cuidados intensivos y un compromiso mínimo de 6 meses.</small>
                </div>
              </div>
            </div>

            <div class="d-grid gap-2 d-md-flex">
              <button class="btn btn-lg px-4 me-md-2"
                      style="background: linear-gradient(45deg, #ff6b6b, #ee5a24); color: white; border: none;"
                      (click)="openModal('premium')">
                <i class="fas fa-baby me-2"></i>
                Ver Bebés Disponibles
              </button>
              <button class="btn btn-outline-secondary btn-lg px-4">
                <i class="fas fa-info-circle me-2"></i>
                Más Información
              </button>
            </div>
          </div>
        </div>

        <!-- Estadísticas de Bebés -->
        <div class="row mt-5 pt-4 border-top border-white">
          <div class="col-md-3 text-center mb-3">
            <div class="display-6 fw-bold text-white">5</div>
            <small class="text-white-50">Bebés Disponibles</small>
          </div>
          <div class="col-md-3 text-center mb-3">
            <div class="display-6 fw-bold text-white">97%</div>
            <small class="text-white-50">Tasa de Supervivencia</small>
          </div>
          <div class="col-md-3 text-center mb-3">
            <div class="display-6 fw-bold text-white">45</div>
            <small class="text-white-50">Días Promedio de Cuidado</small>
          </div>
          <div class="col-md-3 text-center mb-3">
            <div class="display-6 fw-bold text-white">24/7</div>
            <small class="text-white-50">Monitoreo Veterinario</small>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Donación Única -->
<div class="row mb-5">
  <div class="col-12">
    <div class="card border-0 shadow-sm" style="background: linear-gradient(135deg, #17a2b8 0%, #6610f2 100%); color: white;">
      <div class="card-body p-5 text-center">
        <h3 class="mb-4">
          <i class="fas fa-hand-holding-heart me-3"></i>
          ¿Prefieres hacer una donación única?
        </h3>
        <p class="lead mb-4">
          Cada contribución, sin importar el monto, marca la diferencia en la vida de los pandas
        </p>
        <div class="row justify-content-center">
          <div class="col-md-8">
            <div class="btn-group flex-wrap" role="group">
              <button class="btn btn-outline-light btn-lg m-1">
                <i class="fas fa-leaf me-2"></i>25€
              </button>
              <button class="btn btn-outline-light btn-lg m-1">
                <i class="fas fa-seedling me-2"></i>50€
              </button>
              <button class="btn btn-outline-light btn-lg m-1">
                <i class="fas fa-tree me-2"></i>100€
              </button>
              <button class="btn btn-outline-light btn-lg m-1">
                <i class="fas fa-forest me-2"></i>250€
              </button>
              <button class="btn btn-light btn-lg m-1">
                <i class="fas fa-edit me-2"></i>Otro monto
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Impacto de las Donaciones -->
<div class="row mb-5">
  <div class="col-12 text-center mb-4">
    <h2 class="display-5" style="color: #2d5a27;">
      <i class="fas fa-chart-line me-3"></i>
      Tu Impacto en Números
    </h2>
    <p class="lead text-muted">Así es como tu contribución ayuda directamente a los pandas</p>
  </div>

  <div class="col-md-3 mb-4">
    <div class="card text-center h-100 border-0 shadow-sm">
      <div class="card-body">
        <div class="display-4 text-success mb-3">
          <i class="fas fa-utensils"></i>
        </div>
        <h5>25€</h5>
        <p class="text-muted">Alimenta a un panda por 3 días</p>
        <small class="text-success">~15 kg de bambú fresco</small>
      </div>
    </div>
  </div>

  <div class="col-md-3 mb-4">
    <div class="card text-center h-100 border-0 shadow-sm">
      <div class="card-body">
        <div class="display-4 text-info mb-3">
          <i class="fas fa-stethoscope"></i>
        </div>
        <h5>50€</h5>
        <p class="text-muted">Cuidados veterinarios básicos</p>
        <small class="text-info">Chequeos y vacunación</small>
      </div>
    </div>
  </div>

  <div class="col-md-3 mb-4">
    <div class="card text-center h-100 border-0 shadow-sm">
      <div class="card-body">
        <div class="display-4 text-warning mb-3">
          <i class="fas fa-seedling"></i>
        </div>
        <h5>100€</h5>
        <p class="text-muted">Plantación de bambú</p>
        <small class="text-warning">50 m² de hábitat restaurado</small>
      </div>
    </div>
  </div>

  <div class="col-md-3 mb-4">
    <div class="card text-center h-100 border-0 shadow-sm">
      <div class="card-body">
        <div class="display-4 text-danger mb-3">
          <i class="fas fa-microscope"></i>
        </div>
        <h5>250€</h5>
        <p class="text-muted">Investigación genética</p>
        <small class="text-danger">1 mes de estudios de reproducción</small>
      </div>
    </div>
  </div>
</div>

<!-- Testimonios -->
<div class="row mb-5">
  <div class="col-12 text-center mb-4">
    <h2 class="display-5" style="color: #2d5a27;">
      <i class="fas fa-comments me-3"></i>
      Lo que dicen nuestros padrinos
    </h2>
  </div>

  <div class="col-md-4 mb-4">
    <div class="card border-0 shadow-sm h-100">
      <div class="card-body text-center">
        <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100&q=80"
             class="rounded-circle mb-3" alt="Ana" style="width: 80px; height: 80px; object-fit: cover;">
        <blockquote class="blockquote">
          <p>"Adoptar a Mei Mei ha sido una experiencia increíble. Recibir sus fotos y actualizaciones me llena de alegría."</p>
        </blockquote>
        <footer class="blockquote-footer">
          <strong>Ana González</strong> <small class="text-muted">Madrina desde 2023</small>
        </footer>
        <div class="mt-2">
          <i class="fas fa-star text-warning"></i>
          <i class="fas fa-star text-warning"></i>
          <i class="fas fa-star text-warning"></i>
          <i class="fas fa-star text-warning"></i>
          <i class="fas fa-star text-warning"></i>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-4 mb-4">
    <div class="card border-0 shadow-sm h-100">
      <div class="card-body text-center">
        <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100&q=80"
             class="rounded-circle mb-3" alt="Carlos" style="width: 80px; height: 80px; object-fit: cover;">
        <blockquote class="blockquote">
          <p>"Pude visitar a mi panda adoptado en Chengdu. Fue el viaje más emotivo de mi vida. ¡Totalmente recomendado!"</p>
        </blockquote>
        <footer class="blockquote-footer">
          <strong>Carlos Martín</strong> <small class="text-muted">Padrino VIP desde 2022</small>
        </footer>
        <div class="mt-2">
          <i class="fas fa-star text-warning"></i>
          <i class="fas fa-star text-warning"></i>
          <i class="fas fa-star text-warning"></i>
          <i class="fas fa-star text-warning"></i>
          <i class="fas fa-star text-warning"></i>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-4 mb-4">
    <div class="card border-0 shadow-sm h-100">
      <div class="card-body text-center">
        <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&h=100&q=80"
             class="rounded-circle mb-3" alt="Laura" style="width: 80px; height: 80px; object-fit: cover;">
        <blockquote class="blockquote">
          <p>"Mi hija está emocionada con su panda adoptado. Es una hermosa forma de enseñar sobre conservación."</p>
        </blockquote>
        <footer class="blockquote-footer">
          <strong>Laura Ruiz</strong> <small class="text-muted">Familia adoptiva desde 2024</small>
        </footer>
        <div class="mt-2">
          <i class="fas fa-star text-warning"></i>
          <i class="fas fa-star text-warning"></i>
          <i class="fas fa-star text-warning"></i>
          <i class="fas fa-star text-warning"></i>
          <i class="fas fa-star text-warning"></i>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Call to Action Final -->
<div class="row">
  <div class="col-12">
    <div class="card border-0 text-center" style="background: linear-gradient(135deg, #2d5a27 0%, #4a7c59 100%); color: white;">
      <div class="card-body p-5">
        <h2 class="mb-3">
          <i class="fas fa-paw me-3"></i>
          ¡Únete a nuestra familia de protectores de pandas!
        </h2>
        <p class="lead mb-4">
          Con más de 10,000 padrinos activos, juntos hemos logrado incrementar la población de pandas en un 17% en los últimos 5 años
        </p>
        <div class="row justify-content-center">
          <div class="col-md-8">
            <div class="row g-2">
              <div class="col-md-4">
                <button class="btn btn-warning btn-lg w-100" (click)="openModal('premium')">
                  <i class="fas fa-heart me-2"></i>
                  Adoptar Ahora
                </button>
              </div>
              <div class="col-md-4">
                <button class="btn btn-info btn-lg w-100">
                  <i class="fas fa-question-circle me-2"></i>
                  Más Información
                </button>
              </div>
              <div class="col-md-4">
                <button class="btn btn-success btn-lg w-100">
                  <i class="fas fa-gift me-2"></i>
                  Regalar Adopción
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="mt-4">
          <small class="text-light">
            <i class="fas fa-shield-alt me-1"></i>
            Transacciones seguras • Certificado SSL • 100% de tu donación va a conservación
          </small>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Adopción -->
<div class="modal fade" [class.show]="showModal" [style.display]="showModal ? 'block' : 'none'"
     style="background: rgba(0,0,0,0.5);" *ngIf="showModal">
  <div class="modal-dialog modal-xl">
    <div class="modal-content border-0 shadow-lg">

      <!-- Header del Modal -->
      <div class="modal-header border-0" style="background: linear-gradient(135deg, #2d5a27 0%, #4a7c59 100%); color: white;">
        <h4 class="modal-title">
          <i class="fas fa-heart me-2"></i>
          Adoptar Panda - {{getPlanName()}} ({{getPlanPrice()}}/mes)
        </h4>
        <button type="button" class="btn-close btn-close-white" (click)="closeModal()"></button>
      </div>

      <!-- Indicador de Pasos -->
      <div class="px-4 py-3 bg-light">
        <div class="row text-center">
          <div class="col-4">
            <div class="d-flex align-items-center justify-content-center">
              <div class="rounded-circle d-flex align-items-center justify-content-center me-2"
                   [class]="currentStep >= 1 ? 'bg-success text-white' : 'bg-secondary text-white'"
                   style="width: 30px; height: 30px; font-size: 14px;">
                <i class="fas" [class.fa-check]="currentStep > 1" [class.fa-paw]="currentStep === 1"></i>
              </div>
              <span [class]="currentStep >= 1 ? 'text-success fw-bold' : 'text-muted'">Elige tu Panda</span>
            </div>
          </div>
          <div class="col-4">
            <div class="d-flex align-items-center justify-content-center">
              <div class="rounded-circle d-flex align-items-center justify-content-center me-2"
                   [class]="currentStep >= 2 ? 'bg-success text-white' : 'bg-secondary text-white'"
                   style="width: 30px; height: 30px; font-size: 14px;">
                <i class="fas" [class.fa-check]="currentStep > 2" [class.fa-user]="currentStep <= 2"></i>
              </div>
              <span [class]="currentStep >= 2 ? 'text-success fw-bold' : 'text-muted'">Tus Datos</span>
            </div>
          </div>
          <div class="col-4">
            <div class="d-flex align-items-center justify-content-center">
              <div class="rounded-circle d-flex align-items-center justify-content-center me-2"
                   [class]="currentStep >= 3 ? 'bg-success text-white' : 'bg-secondary text-white'"
                   style="width: 30px; height: 30px; font-size: 14px;">
                <i class="fas fa-credit-card"></i>
              </div>
              <span [class]="currentStep >= 3 ? 'text-success fw-bold' : 'text-muted'">Pago</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Contenido del Modal -->
      <div class="modal-body p-4" style="max-height: 70vh; overflow-y: auto;">

        <!-- Paso 1: Selección de Panda -->
        <div *ngIf="currentStep === 1">
          <h5 class="mb-4 text-center">
            <i class="fas fa-paw text-success me-2"></i>
            Elige el panda que quieres adoptar
          </h5>

          <!-- Filtros de Categoría -->
          <div class="row mb-4">
            <div class="col-12 text-center">
              <div class="btn-group" role="group">
                <button type="button" class="btn"
                        [class]="pandaFilter === 'all' ? 'btn-success' : 'btn-outline-success'"
                        (click)="setPandaFilter('all')">
                  <i class="fas fa-paw me-1"></i>Todos los Pandas
                </button>
                <button type="button" class="btn"
                        [class]="pandaFilter === 'adults' ? 'btn-primary' : 'btn-outline-primary'"
                        (click)="setPandaFilter('adults')">
                  <i class="fas fa-adult me-1"></i>Adultos
                </button>
                <button type="button" class="btn"
                        [class]="pandaFilter === 'babies' ? 'btn-warning' : 'btn-outline-warning'"
                        (click)="setPandaFilter('babies')">
                  <i class="fas fa-baby me-1"></i>Recién Nacidos
                </button>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6 col-lg-3 mb-3" *ngFor="let panda of getFilteredPandas()">
              <div class="card h-100 border-0 shadow-sm position-relative"
                   [class.border-success]="adoptionForm.selectedPanda?.id === panda.id"
                   [class.shadow]="adoptionForm.selectedPanda?.id === panda.id"
                   style="cursor: pointer; transition: all 0.3s;"
                   (click)="selectPanda(panda)"
                   [class.opacity-50]="!panda.available">

                <div *ngIf="!panda.available" class="position-absolute top-0 end-0 m-2">
                  <span class="badge bg-danger">No Disponible</span>
                </div>

                <div *ngIf="adoptionForm.selectedPanda?.id === panda.id"
                     class="position-absolute top-0 start-0 m-2">
                  <div class="bg-success text-white rounded-circle d-flex align-items-center justify-content-center"
                       style="width: 30px; height: 30px;">
                    <i class="fas fa-check"></i>
                  </div>
                </div>

                <img [src]="panda.image" class="card-img-top" [alt]="panda.name"
                     style="height: 200px; object-fit: cover;">

                <div class="card-body text-center">
                  <h6 class="card-title fw-bold">
                    {{panda.name}}
                    <span *ngIf="panda.isBaby" class="badge bg-warning ms-1">
                      <i class="fas fa-baby"></i> Bebé
                    </span>
                  </h6>

                  <div class="small text-muted mb-2">
                    <div><i class="fas fa-birthday-cake me-1"></i> {{panda.age}}</div>
                    <div><i class="fas fa-venus-mars me-1"></i> {{panda.gender}}</div>
                    <div><i class="fas fa-map-marker-alt me-1"></i> {{panda.location}}</div>
                    <div *ngIf="panda.isBaby && panda.mother">
                      <i class="fas fa-heart me-1 text-danger"></i> Madre: {{panda.mother}}
                    </div>
                  </div>

                  <p class="card-text small">
                    <strong>Personalidad:</strong> {{panda.personality}}
                  </p>

                  <!-- Información especial para bebés -->
                  <div *ngIf="panda.isBaby" class="alert alert-warning p-2 mt-2">
                    <small>
                      <i class="fas fa-exclamation-triangle me-1"></i>
                      <strong>Cuidados especiales:</strong><br>
                      {{panda.specialNeeds}}
                    </small>
                  </div>

                  <div *ngIf="panda.available" class="mt-2">
                    <button class="btn btn-sm"
                            [class]="adoptionForm.selectedPanda?.id === panda.id ? 'btn-success' : 'btn-outline-success'"
                            (click)="selectPanda(panda)">
                      <i class="fas" [class.fa-heart]="adoptionForm.selectedPanda?.id === panda.id"
                         [class.fa-heart-o]="adoptionForm.selectedPanda?.id !== panda.id"></i>
                      {{adoptionForm.selectedPanda?.id === panda.id ? 'Seleccionado' : 'Seleccionar'}}
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div *ngIf="adoptionForm.selectedPanda" class="alert mt-4"
               [class.alert-success]="!adoptionForm.selectedPanda.isBaby"
               [class.alert-warning]="adoptionForm.selectedPanda.isBaby">
            <div class="row align-items-center">
              <div class="col-md-3 text-center">
                <img [src]="adoptionForm.selectedPanda.image" 
                     class="rounded-circle" 
                     style="width: 80px; height: 80px; object-fit: cover;">
                <div *ngIf="adoptionForm.selectedPanda.isBaby" class="mt-2">
                  <span class="badge bg-warning">
                    <i class="fas fa-baby me-1"></i>Recién Nacido
                  </span>
                </div>
              </div>
              <div class="col-md-9">
                <h6 class="mb-1">
                  <i class="fas fa-heart text-danger me-2"></i>
                  Has elegido a {{adoptionForm.selectedPanda.name}}
                  <span *ngIf="adoptionForm.selectedPanda.isBaby" class="text-warning">
                    <i class="fas fa-star ms-2"></i>
                  </span>
                </h6>
                <p class="mb-2">
                  {{adoptionForm.selectedPanda.personality}} • {{adoptionForm.selectedPanda.age}} • {{adoptionForm.selectedPanda.location}}
                </p>
                
                <!-- Información especial para bebés -->
                <div *ngIf="adoptionForm.selectedPanda.isBaby">
                  <div class="row">
                    <div class="col-md-6">
                      <small class="text-muted">
                        <i class="fas fa-calendar me-1"></i> 
                        <strong>Nacimiento:</strong> {{adoptionForm.selectedPanda.birthDate}}
                      </small>
                    </div>
                    <div class="col-md-6" *ngIf="adoptionForm.selectedPanda.mother">
                      <small class="text-muted">
                        <i class="fas fa-heart me-1"></i> 
                        <strong>Madre:</strong> {{adoptionForm.selectedPanda.mother}}
                      </small>
                    </div>
                  </div>
                  <div class="mt-2">
                    <small class="text-warning">
                      <i class="fas fa-info-circle me-1"></i>
                      <strong>Nota:</strong> La adopción de pandas bebés incluye un seguimiento especial de 6 meses.
                    </small>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Paso 2: Datos Personales -->
        <div *ngIf="currentStep === 2">
          <h5 class="mb-4 text-center">
            <i class="fas fa-user text-primary me-2"></i>
            Información Personal
          </h5>

          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">Nombre *</label>
              <input type="text" class="form-control" [(ngModel)]="adoptionForm.personalInfo.firstName"
                     placeholder="Tu nombre" required>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Apellidos *</label>
              <input type="text" class="form-control" [(ngModel)]="adoptionForm.personalInfo.lastName"
                     placeholder="Tus apellidos" required>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Email *</label>
              <input type="email" class="form-control" [(ngModel)]="adoptionForm.personalInfo.email"
                     placeholder="tu@email.com" required>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Teléfono *</label>
              <input type="tel" class="form-control" [(ngModel)]="adoptionForm.personalInfo.phone"
                     placeholder="+34 600 000 000" required>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">País</label>
              <select class="form-select" [(ngModel)]="adoptionForm.personalInfo.country">
                <option value="">Selecciona tu país</option>
                <option value="ES">España</option>
                <option value="MX">México</option>
                <option value="AR">Argentina</option>
                <option value="CO">Colombia</option>
                <option value="CL">Chile</option>
                <option value="PE">Perú</option>
                <option value="Other">Otro</option>
              </select>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Dirección</label>
              <input type="text" class="form-control" [(ngModel)]="adoptionForm.personalInfo.address"
                     placeholder="Tu dirección postal">
            </div>
          </div>

          <div class="alert alert-info">
            <div class="row align-items-center">
              <div class="col-md-3 text-center">
                <i class="fas fa-shield-alt fa-3x text-primary"></i>
              </div>
              <div class="col-md-9">
                <h6>Protección de Datos</h6>
                <small>Tus datos están completamente seguros y solo se utilizarán para gestionar tu adopción y enviarte actualizaciones de tu panda adoptado.</small>
              </div>
            </div>
          </div>
        </div>

        <!-- Paso 3: Información de Pago -->
        <div *ngIf="currentStep === 3">
          <h5 class="mb-4 text-center">
            <i class="fas fa-credit-card text-warning me-2"></i>
            Información de Pago
          </h5>

          <!-- Resumen de la Adopción -->
          <div class="card bg-light mb-4">
            <div class="card-body">
              <h6 class="card-title">Resumen de tu Adopción</h6>
              <div class="row">
                <div class="col-md-4 text-center">
                  <img [src]="adoptionForm.selectedPanda?.image"
                       class="rounded-circle mb-2"
                       style="width: 60px; height: 60px; object-fit: cover;">
                  <div><strong>{{adoptionForm.selectedPanda?.name}}</strong></div>
                </div>
                <div class="col-md-4">
                  <div><strong>Plan:</strong> {{getPlanName()}}</div>
                  <div><strong>Precio:</strong> {{getPlanPrice()}}/mes</div>
                  <div><strong>Padrino:</strong> {{adoptionForm.personalInfo.firstName}} {{adoptionForm.personalInfo.lastName}}</div>
                </div>
                <div class="col-md-4 text-end">
                  <div class="display-6 fw-bold text-success">{{getPlanPrice()}}</div>
                  <small class="text-muted">por mes</small>
                </div>
              </div>
            </div>
          </div>

          <!-- Métodos de Pago -->
          <div class="mb-3">
            <label class="form-label">Método de Pago</label>
            <div class="row">
              <div class="col-md-4 mb-2">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="paymentMethod"
                         value="card" [(ngModel)]="adoptionForm.paymentInfo.method" id="paymentCard">
                  <label class="form-check-label" for="paymentCard">
                    <i class="fas fa-credit-card me-2"></i>Tarjeta de Crédito/Débito
                  </label>
                </div>
              </div>
              <div class="col-md-4 mb-2">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="paymentMethod"
                         value="paypal" [(ngModel)]="adoptionForm.paymentInfo.method" id="paymentPaypal">
                  <label class="form-check-label" for="paymentPaypal">
                    <i class="fab fa-paypal me-2"></i>PayPal
                  </label>
                </div>
              </div>
              <div class="col-md-4 mb-2">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="paymentMethod"
                         value="transfer" [(ngModel)]="adoptionForm.paymentInfo.method" id="paymentTransfer">
                  <label class="form-check-label" for="paymentTransfer">
                    <i class="fas fa-university me-2"></i>Transferencia
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- Formulario de Tarjeta -->
          <div *ngIf="adoptionForm.paymentInfo.method === 'card'">
            <div class="row">
              <div class="col-md-12 mb-3">
                <label class="form-label">Nombre en la Tarjeta *</label>
                <input type="text" class="form-control" [(ngModel)]="adoptionForm.paymentInfo.cardName"
                       placeholder="Nombre como aparece en la tarjeta" required>
              </div>
              <div class="col-md-8 mb-3">
                <label class="form-label">Número de Tarjeta *</label>
                <input type="text" class="form-control" [(ngModel)]="adoptionForm.paymentInfo.cardNumber"
                       placeholder="1234 5678 9012 3456" maxlength="19" required>
              </div>
              <div class="col-md-2 mb-3">
                <label class="form-label">MM/AA *</label>
                <input type="text" class="form-control" [(ngModel)]="adoptionForm.paymentInfo.expiryDate"
                       placeholder="12/25" maxlength="5" required>
              </div>
              <div class="col-md-2 mb-3">
                <label class="form-label">CVV *</label>
                <input type="text" class="form-control" [(ngModel)]="adoptionForm.paymentInfo.cvv"
                       placeholder="123" maxlength="4" required>
              </div>
            </div>
          </div>

          <!-- Información PayPal -->
          <div *ngIf="adoptionForm.paymentInfo.method === 'paypal'" class="alert alert-info">
            <i class="fab fa-paypal fa-2x float-start me-3"></i>
            <div>
              <strong>Pago con PayPal</strong><br>
              Serás redirigido a PayPal para completar el pago de forma segura.
            </div>
          </div>

          <!-- Información Transferencia -->
          <div *ngIf="adoptionForm.paymentInfo.method === 'transfer'" class="alert alert-info">
            <i class="fas fa-university fa-2x float-start me-3"></i>
            <div>
              <strong>Pago por Transferencia</strong><br>
              Te enviaremos los datos bancarios por email para realizar la transferencia.
            </div>
          </div>

          <!-- Términos y Condiciones -->
          <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="acceptTerms" required>
            <label class="form-check-label" for="acceptTerms">
              Acepto los <a href="#" class="text-primary">términos y condiciones</a> y la
              <a href="#" class="text-primary">política de privacidad</a>
            </label>
          </div>

          <!-- Información de Seguridad -->
          <div class="alert alert-success">
            <div class="row align-items-center">
              <div class="col-md-1 text-center">
                <i class="fas fa-lock fa-2x"></i>
              </div>
              <div class="col-md-11">
                <strong>Pago 100% Seguro</strong><br>
                <small>Utilizamos encriptación SSL de 256 bits para proteger tu información. Todos los datos son procesados de forma segura.</small>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer del Modal -->
      <div class="modal-footer border-0 bg-light">
        <div class="d-flex w-100 justify-content-between align-items-center">
          <div>
            <button *ngIf="currentStep > 1" type="button" class="btn btn-outline-secondary" (click)="prevStep()">
              <i class="fas fa-arrow-left me-2"></i>Anterior
            </button>
          </div>
          <div>
            <button type="button" class="btn btn-outline-danger me-2" (click)="closeModal()">
              Cancelar
            </button>
            <button *ngIf="currentStep < 3" type="button" class="btn btn-success"
                    [disabled]="(currentStep === 1 && !isStep1Valid()) || (currentStep === 2 && !isStep2Valid())"
                    (click)="nextStep()">
              Continuar <i class="fas fa-arrow-right ms-2"></i>
            </button>
            <button *ngIf="currentStep === 3" type="button" class="btn btn-success btn-lg"
                    [disabled]="!isStep3Valid()"
                    (click)="processAdoption()">
              <i class="fas fa-heart me-2"></i>Completar Adopción
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

